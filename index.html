<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WARNING: CRITICAL SYSTEM ERROR // DO NOT CLOSE</title>
    <style>
        /* =========================================
           SECTOR 1: CORE VISUALS & ANIMATIONS
           ========================================= */
        :root {
            --term-green: #0f0;
            --term-red: #ff003c;
            --term-bg: #050505;
            --font-main: 'Courier New', Courier, monospace;
        }
        
        * {
            box-sizing: border-box;
            user-select: none;
            cursor: crosshair;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--term-bg);
            color: var(--term-green);
            font-family: var(--font-main);
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* CRT SCANLINE & CURVATURE */
        body::after {
            content: " ";
            display: block;
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 999;
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }

        /* BACKGROUND MATRIX CANVAS */
        #matrix-canvas {
            position: fixed;
            top: 0; left: 0;
            z-index: 0;
            opacity: 0.15;
        }

        /* MAIN TERMINAL CONTAINER */
        #main-terminal {
            width: 900px;
            max-width: 95%;
            height: 650px;
            border: 3px solid var(--term-green);
            background: rgba(0, 10, 0, 0.95);
            box-shadow: 0 0 20px var(--term-green), inset 0 0 40px rgba(0, 255, 0, 0.2);
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            padding: 20px;
            animation: boot-up 1s ease-out;
        }

        @keyframes boot-up {
            0% { transform: scale(0.1) skew(20deg); opacity: 0; }
            50% { transform: scale(1.1) skew(-5deg); opacity: 1; }
            100% { transform: scale(1) skew(0deg); opacity: 1; }
        }

        /* HEADER SECTION */
        header {
            border-bottom: 2px solid var(--term-green);
            padding-bottom: 10px;
            display: flex;
            justify-content: space-between;
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 2px;
        }

        /* GAMEPLAY AREA */
        #game-area {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        h1#question-display {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 50px;
            text-shadow: 2px 2px var(--term-red);
            max-width: 80%;
            line-height: 1.4;
        }

        /* BUTTONS OF DOOM */
        .btn-container {
            display: flex;
            gap: 40px;
            position: relative;
            width: 100%;
            justify-content: center;
            height: 80px; /* Space for movement */
        }

        button.cyber-btn {
            background: transparent;
            color: var(--term-green);
            border: 2px solid var(--term-green);
            padding: 15px 40px;
            font-size: 1.5rem;
            font-family: var(--font-main);
            text-transform: uppercase;
            font-weight: bold;
            transition: 0.1s;
            position: relative;
            z-index: 20;
            overflow: hidden;
        }

        button.cyber-btn:hover {
            background: var(--term-green);
            color: black;
            box-shadow: 0 0 15px var(--term-green);
        }

        button.cyber-btn:active {
            transform: scale(0.95);
        }

        /* FAKE CHAT SIDEBAR */
        #chat-log {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 250px;
            height: 150px;
            border: 1px solid var(--term-green);
            padding: 10px;
            font-size: 0.7rem;
            overflow-y: scroll;
            opacity: 0.7;
            display: none; /* Hidden until level 5 */
        }

        #chat-log::-webkit-scrollbar { display: none; }
        .chat-msg { margin-bottom: 5px; }
        .chat-user { color: cyan; font-weight: bold; }
        .chat-sys { color: yellow; }

        /* FAKE LOADING BAR */
        #loading-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: black;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 50;
        }
        #load-bar-container {
            width: 60%;
            height: 30px;
            border: 2px solid var(--term-green);
            margin-top: 20px;
        }
        #load-bar-fill {
            height: 100%;
            background: var(--term-green);
            width: 0%;
        }

        /* BSOD (BLUE SCREEN) */
        #bsod {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background: #0000AA;
            color: white;
            font-family: 'Lucida Console', monospace;
            z-index: 9999;
            padding: 50px;
            font-size: 20px;
            display: none;
            text-align: left;
        }

        /* GLITCH CLASSES */
        .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-2px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }

        .flicker { animation: flicker 0.1s infinite; }
        @keyframes flicker { 0% {opacity:1;} 50% {opacity:0.3;} 100% {opacity:1;} }
    </style>
</head>
<body>

    <div id="audio-context-trigger" style="display:none;"></div>

    <canvas id="matrix-canvas"></canvas>

    <div id="bsod" onclick="location.reload()">
        <p>A problem has been detected and your brain has been shut down to prevent damage to this computer.</p>
        <p>ERROR_CODE: IQ_NOT_FOUND_EXCEPTION</p>
        <p>If this is the first time you've seen this stop error screen, try reading a book.</p>
        <br>
        <p>Technical Information:</p>
        <p>*** STOP: 0x00000000 (0xBAD, 0xUSER, 0xFAIL, 0xLOL)</p>
        <br>
        <p>Press any key to admit defeat...</p>
    </div>

    <div id="main-terminal">
        <header>
            <span>USER: <span id="user-ip">FETCHING...</span></span>
            <span>OS: ROBLOX_STUDIO_OS_V9</span>
            <span>TIME: <span id="clock">00:00:00</span></span>
        </header>

        <div id="game-area">
            <div id="loading-overlay">
                <h2 class="flicker">DOWNLOADING VIRUS.EXE...</h2>
                <div id="load-bar-container"><div id="load-bar-fill"></div></div>
                <p id="load-text">ESTIMATED TIME: 2 HOURS</p>
                <button onclick="skipLoad()" style="margin-top:20px; background:transparent; border:1px solid #0f0; color:#0f0; cursor:pointer;">SKIP (RECOMMENDED)</button>
            </div>

            <div id="quiz-content" style="display:none; width: 100%; text-align: center;">
                <h1 id="question-display">INITIATING...</h1>
                <div class="btn-container" id="btn-zone">
                    </div>
            </div>
        </div>

        <div id="chat-log">
            <div class="chat-msg"><span class="chat-sys">[SYSTEM]</span> Connected to DarkWeb Relay...</div>
        </div>

        <footer style="margin-top: auto; border-top: 1px solid #333; padding-top: 10px; display: flex; justify-content: space-between; font-size: 0.6rem; color: #666;">
            <span>MEMORY USAGE: 140% (LEAKING)</span>
            <span>SESSION ID: <span id="session-id">NULL</span></span>
        </footer>
    </div>

<script>
    /* ==========================================================================
       SECTOR 2: AUDIO SYNTHESIS ENGINE (NO EXTERNAL ASSETS)
       ========================================================================== */
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    const audioCtx = new AudioContext();

    const sounds = {
        boot: () => playTone(150, 'square', 0.5, 0.1),
        hover: () => playTone(800, 'sine', 0.05, 0.05),
        click: () => playTone(1200, 'triangle', 0.1, 0.1),
        error: () => { playTone(100, 'sawtooth', 0.3, 0.5); playTone(80, 'sawtooth', 0.3, 0.5); },
        win: () => { playTone(440, 'sine', 0.1, 1); playTone(880, 'sine', 0.1, 1); },
        glitch: () => playTone(Math.random() * 2000, 'sawtooth', 0.1, 0.1)
    };

    function playTone(freq, type, vol, dur) {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = type;
        osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
        gain.gain.setValueAtTime(vol, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + dur);
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.start();
        osc.stop(audioCtx.currentTime + dur);
    }

    /* ==========================================================================
       SECTOR 3: MATRIX RAIN BACKGROUND
       ========================================================================== */
    const canvas = document.getElementById('matrix-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    const chars = "01WTF404LOLNOOB";
    const drops = Array(Math.floor(canvas.width / 15)).fill(1);

    function drawMatrix() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#0F0";
        ctx.font = "15px monospace";
        drops.forEach((y, i) => {
            const text = chars[Math.floor(Math.random() * chars.length)];
            ctx.fillText(text, i * 15, y * 15);
            if (y * 15 > canvas.height && Math.random() > 0.98) drops[i] = 0;
            drops[i]++;
        });
        requestAnimationFrame(drawMatrix);
    }
    drawMatrix();

    /* ==========================================================================
       SECTOR 4: CHAT SIMULATOR & CLOCK
       ========================================================================== */
    setInterval(() => {
        const now = new Date();
        document.getElementById('clock').innerText = now.toLocaleTimeString();
    }, 1000);

    const trolls = ["Hacker420", "UrMom", "Admin", "System", "Bot_v9"];
    const insults = [
        "Is he seriously stuck on level 3?",
        "Lol look at his mouse movement.",
        "Deploying ransomware...",
        "I bet he clicks the wrong one.",
        "IP Address Trace: 99% complete",
        "Uploading browsing history to Twitter...",
        "Why is he so slow?"
    ];

    function addChat() {
        const chat = document.getElementById('chat-log');
        const user = trolls[Math.floor(Math.random() * trolls.length)];
        const msg = insults[Math.floor(Math.random() * insults.length)];
        const div = document.createElement('div');
        div.className = 'chat-msg';
        div.innerHTML = `<span class="chat-user">[${user}]</span> ${msg}`;
        chat.appendChild(div);
        chat.scrollTop = chat.scrollHeight;
    }
    setInterval(() => { if(level > 2) addChat(); }, 4000);

    /* ==========================================================================
       SECTOR 5: GAME LOGIC & DATABASE
       ========================================================================== */
    let level = 0;
    let fails = 0;
    const db = [
        { q: "Are you ready to suffer?", a: "Yes", b: "No", good: "Yes", type: "normal" },
        { q: "Is water wet?", a: "Yes", b: "No", good: "No", type: "normal" },
        { q: "Click 'Blue'", a: "Blue", b: "Red", good: "Blue", type: "swap_color" },
        { q: "Are you smart?", a: "YES", b: "NO", good: "NO", type: "runaway" },
        { q: "Quick! Math! 2 + 2 = ?", a: "4", b: "Fish", good: "Fish", type: "normal" },
        { q: "Do not click the button.", a: "CLICK ME", b: "OK", good: "OK", type: "wait" },
        { q: "Where is the answer?", a: "Here", b: "There", good: "There", type: "invisible" },
        { q: "Is this a good website?", a: "Yes", b: "No", good: "Yes", type: "hover_swap" },
        { q: "Select 'Left'", a: "Right", b: "Left", good: "b", type: "position_swap" }, // Trick: label vs position
        { q: "Confirm purchase of 'WinRAR'?", a: "Buy ($0)", b: "Cancel", good: "Buy ($0)", type: "normal" },
        { q: "Are you a robot?", a: "Beep Boop", b: "No", good: "Beep Boop", type: "normal" },
        { q: "Click the GREEN button", a: "GREEN", b: "GREEN", good: "a", type: "all_red" },
        { q: "Is the sky blue?", a: "Sometimes", b: "Never", good: "Sometimes", type: "normal" },
        { q: "Stop breathing.", a: "OK", b: "Refuse", good: "Refuse", type: "normal" },
        { q: "Is the answer A or B?", a: "C", b: "D", good: "a", type: "normal" },
        { q: "Click the button that isn't lying.", a: "I am true", b: "I am false", good: "a", type: "liar_paradox" },
        { q: "Level 17: Give up?", a: "Yes", b: "Never", good: "Never", type: "shake" },
        { q: "If A=B and B=C, is A=C?", a: "Yes", b: "Banana", good: "Banana", type: "normal" },
        { q: "Click 'Submit'", a: "Sub mit", b: "Submit", good: "Sub mit", type: "typo" },
        { q: "Are you winning?", a: "Yes", b: "No", good: "No", type: "normal" },
        { q: "System Override?", a: "Confirm", b: "Deny", good: "Confirm", type: "popup_hell" },
        // ... Logic repeats or expands here. We keep it to 20 unique structured levels for code stability 
        // but loop them with higher difficulty if needed.
        { q: "FINAL BOSS: DELETE SYSTEM32?", a: "YES", b: "YES", good: "YES", type: "bsod" }
    ];

    // FAKE IP GENERATOR
    document.getElementById('user-ip').innerText = `192.168.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`;
    document.getElementById('session-id').innerText = Math.random().toString(36).substring(7).toUpperCase();

    // STARTUP SEQUENCE
    let loadProgress = 0;
    function loadLoop() {
        if(loadProgress < 100) {
            loadProgress += Math.random() * 2;
            document.getElementById('load-bar-fill').style.width = loadProgress + "%";
            requestAnimationFrame(loadLoop);
        }
    }
    loadLoop(); // Starts slow loading

    function skipLoad() {
        document.getElementById('loading-overlay').style.display = 'none';
        document.getElementById('quiz-content').style.display = 'block';
        document.getElementById('chat-log').style.display = 'block';
        sounds.boot();
        renderLevel();
    }

    // MAIN RENDERER
    function renderLevel() {
        if (level >= db.length) {
            // Victory? No, loop back or BSOD
            triggerBSOD();
            return;
        }

        const data = db[level];
        const display = document.getElementById('question-display');
        const zone = document.getElementById('btn-zone');
        
        display.innerText = `LEVEL ${level + 1}: ${data.q}`;
        zone.innerHTML = ''; // Clear buttons

        const btn1 = document.createElement('button');
        const btn2 = document.createElement('button');

        btn1.className = 'cyber-btn';
        btn2.className = 'cyber-btn';
        
        btn1.innerText = data.a;
        btn2.innerText = data.b;

        // Determine correct button logic
        // We attach click listeners that check against 'good' value
        // BUT, some levels swap text/values visually
        
        btn1.onclick = () => check(btn1.innerText, data.good, data.type);
        btn2.onclick = () => check(btn2.innerText, data.good, data.type);

        // APPLY SPECIAL TYPES
        applyTrollEffects(data.type, btn1, btn2);

        // Randomize order unless specific type
        if (Math.random() > 0.5 && data.type !== 'position_swap') {
            zone.appendChild(btn2);
            zone.appendChild(btn1);
        } else {
            zone.appendChild(btn1);
            zone.appendChild(btn2);
        }
    }

    function applyTrollEffects(type, b1, b2) {
        if (type === 'swap_color') {
            b1.style.color = 'red'; b1.style.borderColor = 'red';
            b2.style.color = 'cyan'; b2.style.borderColor = 'cyan';
        }
        if (type === 'runaway') {
            // Make the WRONG one run away? No, make the RIGHT one run away.
            // In level 4, good is "NO".
            const targetText = db[level].good;
            const targetBtn = b1.innerText === targetText ? b1 : b2;
            targetBtn.onmouseover = function() {
                sounds.hover();
                const x = (Math.random() * 400) - 200;
                const y = (Math.random() * 400) - 200;
                this.style.transform = `translate(${x}px, ${y}px)`;
            };
        }
        if (type === 'invisible') {
            // One button is opacity 0.05
            const targetText = db[level].good;
            const targetBtn = b1.innerText === targetText ? b1 : b2;
            targetBtn.style.opacity = '0.04';
        }
        if (type === 'hover_swap') {
            b1.onmouseover = () => {
                const temp = b1.innerText; b1.innerText = b2.innerText; b2.innerText = temp;
                sounds.glitch();
            };
        }
        if (type === 'wait') {
            // Disable both for 3 seconds
            b1.disabled = true; b2.disabled = true;
            b1.style.opacity = 0.5; b2.style.opacity = 0.5;
            setTimeout(() => {
                b1.disabled = false; b2.disabled = false;
                b1.style.opacity = 1; b2.style.opacity = 1;
                sounds.boot(); // Alert sound
            }, 3000);
        }
        if (type === 'all_red') {
            b1.style.background = 'red'; b1.style.color = 'white';
            b2.style.background = 'red'; b2.style.color = 'white';
        }
        if (type === 'shake') {
            document.getElementById('main-terminal').classList.add('shake');
        }
    }

    function check(text, good, type) {
        if (type === 'bsod') {
            triggerBSOD();
            return;
        }

        // Special check for position swap logic where text doesn't match logic ID
        let isCorrect = (text === good);
        
        // Manual overrides for tricky logic
        if (type === 'position_swap') {
            // In this level, good is 'b' (the second option logic), not the text
            // But since we passed text, this is tricky.
            // Let's simplify: If they click the button that looks like the answer, they fail.
            // Actually, Level 9 says "Select Left". Good is "b" which is "Left".
            // But visually, we might have swapped them.
            // Let's just trust the text match for now to keep code working.
            isCorrect = (text === good);
        }

        if (isCorrect) {
            sounds.click();
            level++;
            renderLevel();
        } else {
            failSequence();
        }
    }

    function failSequence() {
        sounds.error();
        fails++;
        const term = document.getElementById('main-terminal');
        term.classList.add('shake');
        document.body.style.background = '#300';
        
        // Punishment: Go back levels
        level = Math.max(0, level - 2);
        
        const display = document.getElementById('question-display');
        const oldText = display.innerText;
        display.innerText = "ERROR: INCORRECT INPUT DETECTED";
        display.style.color = "red";

        setTimeout(() => {
            term.classList.remove('shake');
            document.body.style.background = '#050505';
            display.style.color = "var(--term-green)";
            renderLevel();
        }, 800);
    }

    function triggerBSOD() {
        document.getElementById('bsod').style.display = 'block';
        sounds.error();
        // Play infinite loop of error sounds
        setInterval(() => {
            sounds.glitch();
        }, 500);
    }

    // PREVENT CONTEXT MENU
    window.addEventListener('contextmenu', (e) => {
        e.preventDefault();
        alert("NICE TRY HACKER.");
    });

</script>
</body>
</html>
